import{_ as V,a as Me}from"./DJcKeXQs.js";import{m as j,u as F,P as ke,E as xe,a as Te,b as Pe,c as Ne}from"./D3vRGkuf.js";import{a as D,N as ie,b as ae}from"./CIpPGm0y.js";import{m as M,o as u,c as w,a as g,n as T,b as o,w as a,d as L,t as C,u as e,F as A,B as Q,v as se,Q as fe,r as q,R as De,T as Ie,U as ze,p as y,E as N,x as Ue,D as te,q as Y,g as le,H as de,V as he,_ as Z,I as ge,W as Be,z as pe,X as Ae,Y as $e}from"./BxpEjOof.js";import{_ as re}from"./Ddphtmyl.js";import{_ as W}from"./835nQg8a.js";import{u as K,R as X}from"./iRh0XMeS.js";import{u as _e}from"./RsHePYmS.js";import{c as ye}from"./C45RVbce.js";import{_ as oe}from"./CdbiR7o9.js";import{a as Ee,_ as ce}from"./B3GtHJNu.js";import{S as be}from"./D23zkOO0.js";import{_ as Fe}from"./C5X36veZ.js";import{_ as We}from"./DisT8iYB.js";import{_ as ne}from"./CStkqZVZ.js";import{_ as Re}from"./Bh-dvM22.js";import{_ as Ge}from"./NGkWcSns.js";import{_ as Le,a as Ve}from"./CFtEhxhO.js";import{u as je}from"./CkJRSCI6.js";import{_ as ve,a as we}from"./Db9JKr5U.js";import"./UaHJCMlp.js";import"./DMC_Uv8i.js";import"./Br6dbfou.js";import"./CAlQbQj8.js";import"./Cm9BH2tJ.js";import"./BeQTrYKT.js";import"./BUV_O0Pv.js";import"./CMx4vCqV.js";import"./CiZFtKuk.js";import"./KFrN8QqA.js";import"./Sh7brP6T.js";import"./Dj7xy0pV.js";import"./BYxb2o8q.js";const Je={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},qe=M({name:"AppBlockingRound",render:function(t,s){return u(),w("svg",Je,s[0]||(s[0]=[g("path",{d:"M18 8c-2.21 0-4 1.79-4 4s1.79 4 4 4s4-1.79 4-4s-1.79-4-4-4zm-2.5 4A2.5 2.5 0 0 1 18 9.5c.42 0 .8.11 1.15.29l-3.36 3.36c-.18-.35-.29-.73-.29-1.15zm2.5 2.5c-.42 0-.8-.11-1.15-.29l3.36-3.36c.18.35.29.73.29 1.15a2.5 2.5 0 0 1-2.5 2.5z",fill:"currentColor"},null,-1),g("path",{d:"M17 18H7V6h10v1h2V3c0-1.1-.9-2-2-2H7c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2v-4h-2v1z",fill:"currentColor"},null,-1)]))}}),He={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Ye=M({name:"ArrowDownwardRound",render:function(t,s){return u(),w("svg",He,s[0]||(s[0]=[g("path",{d:"M11 5v11.17l-4.88-4.88c-.39-.39-1.03-.39-1.42 0a.996.996 0 0 0 0 1.41l6.59 6.59c.39.39 1.02.39 1.41 0l6.59-6.59a.996.996 0 1 0-1.41-1.41L13 16.17V5c0-.55-.45-1-1-1s-1 .45-1 1z",fill:"currentColor"},null,-1)]))}}),Ke={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Qe=M({name:"ArrowUpwardRound",render:function(t,s){return u(),w("svg",Ke,s[0]||(s[0]=[g("path",{d:"M13 19V7.83l4.88 4.88c.39.39 1.03.39 1.42 0a.996.996 0 0 0 0-1.41l-6.59-6.59a.996.996 0 0 0-1.41 0l-6.6 6.58a.996.996 0 1 0 1.41 1.41L11 7.83V19c0 .55.45 1 1 1s1-.45 1-1z",fill:"currentColor"},null,-1)]))}}),Xe=M({__name:"UserRole",setup(S){const t=j.userRoles,s=D(),l=T({visibility:{modal:!1},loading:{page:!1},searchByFieldName:"name",storeOptions:{storeState:t.store.user,...t.options.store},formModalOptions:{moduleName:t.name,components:{formComponent:t.form.component,buttonIconComponent:t.form.createButtonIconComponent},routePath:t.routePath,width:t.form.modalWidthSize,hiddenFieldsOnEdit:t.dataTable.hiddenFieldsOnEdit,form:t.form.model}});return(r,p)=>{const n=Q,d=V,i=re,m=se,_=fe;return u(),w(A,null,[o(n,{type:"primary",size:"small",onClick:p[0]||(p[0]=h=>e(l).visibility.modal=!0)},{default:a(()=>[L(C(e(s).translate("user_role")),1)]),_:1}),o(_,{show:e(l).visibility.modal,"onUpdate:show":p[2]||(p[2]=h=>e(l).visibility.modal=h),"transform-origin":"center"},{default:a(()=>[o(m,{style:{width:"calc(100vw - 40px)",height:"calc(100vh - 40px)"},title:e(s).translate("manage_user_role"),bordered:!0,size:"small",role:"dialog","aria-modal":"true"},{"header-extra":a(()=>p[3]||(p[3]=[])),footer:a(()=>[o(i,{justify:"end"},{default:a(()=>[o(n,{size:"small",type:"default",onClick:p[1]||(p[1]=h=>e(l).visibility.modal=!1)},{default:a(()=>[L(C(e(s).translate("close")),1)]),_:1})]),_:1})]),default:a(()=>[o(d,{"get-all":!0,module:e(t),"store-options":e(l).storeOptions,"form-modal-options":e(l).formModalOptions,"search-by-field-name":e(l).searchByFieldName},null,8,["module","store-options","form-modal-options","search-by-field-name"])]),_:1},8,["title"])]),_:1},8,["show"])],64)}}}),Ze=M({__name:"users",setup(S){const{isMobile:t}=F(),s=async()=>(await n.movements.browse({all:!0})).map(m=>({label:m.name,value:m.id})),l=q([]),r=T({...j.users}),p=D(),n={movements:K(X.MOVEMENTS)},d=T({loading:{page:!1},searchByFieldName:"name",storeOptions:{storeState:r.store.user,...r.options.store},formModalOptions:{moduleName:r.name,components:{formComponent:r.form.component,buttonIconComponent:r.form.createButtonIconComponent},routePath:r.routePath,width:r.form.modalWidthSize,hiddenFieldsOnEdit:r.dataTable.hiddenFieldsOnEdit,form:r.form.model}});return De(async()=>{Array.isArray(r.options.filter)&&(await Ie(),l.value=await s(),r.options.filter=[...r.options.filter,{name:"Movement",whereFieldIs:"movement_id",values:l.value}])}),(i,m)=>{const _=Xe,h=W,c=V;return u(),w(A,null,[o(h,null,{left:a(()=>[g("b",null,C(e(t)?" ":e(p).translate("manage_users")),1)]),right:a(()=>[g("div",{style:ze(`${e(t)?"padding-right: 10px; margin-top: 10px;":""}`)},[o(_)],4)]),_:1}),o(c,{module:e(r),"store-options":e(d).storeOptions,"form-modal-options":e(d).formModalOptions,"search-by-field-name":e(d).searchByFieldName,"get-all":!1},null,8,["module","store-options","form-modal-options","search-by-field-name"])],64)}}}),et=M({__name:"communicationPlatforms",setup(S){const t=j.communicationPlatforms,s=D(),{isMobile:l}=F(),r=T({loading:{page:!1},searchByFieldName:"name",storeOptions:{storeState:t.store.communicationPlatforms,...t.options.store},formModalOptions:{moduleName:t.name,components:{formComponent:t.form.component,buttonIconComponent:t.form.createButtonIconComponent},routePath:t.routePath,width:t.form.modalWidthSize,hiddenFieldsOnEdit:t.dataTable.hiddenFieldsOnEdit,form:t.form.model}});return(p,n)=>{const d=W,i=V;return u(),w(A,null,[e(l)?N("",!0):(u(),y(d,{key:0},{left:a(()=>[g("b",null,C(e(s).translate("manage_communication_platforms")),1)]),right:a(()=>n[0]||(n[0]=[])),_:1})),o(i,{module:e(t),"store-options":e(r).storeOptions,"form-modal-options":e(r).formModalOptions,"search-by-field-name":e(r).searchByFieldName,"get-all":!1},null,8,["module","store-options","form-modal-options","search-by-field-name"])],64)}}}),tt=M({__name:"faithMilestones",setup(S){const t=j.faithMilestones,s=D(),{isMobile:l}=F(),r=T({loading:{page:!1},searchByFieldName:"name",storeOptions:{storeState:t.store.faithMilestones,...t.options.store},formModalOptions:{moduleName:t.name,components:{formComponent:t.form.component,buttonIconComponent:t.form.createButtonIconComponent},routePath:t.routePath,width:t.form.modalWidthSize,hiddenFieldsOnEdit:t.dataTable.hiddenFieldsOnEdit,form:t.form.model}});return(p,n)=>{const d=W,i=V;return u(),w(A,null,[e(l)?N("",!0):(u(),y(d,{key:0},{left:a(()=>[g("b",null,C(e(s).translate("manage_faith_milestones")),1)]),right:a(()=>n[0]||(n[0]=[])),_:1})),o(i,{module:e(t),"store-options":e(r).storeOptions,"form-modal-options":e(r).formModalOptions,"search-by-field-name":e(r).searchByFieldName,"get-all":!0},null,8,["module","store-options","form-modal-options","search-by-field-name"])],64)}}}),ot=M({__name:"peopleGroups",setup(S){const t=j.peopleGroups,s=D(),{isMobile:l}=F();console.log(t);const r=T({loading:{page:!1},searchByFieldName:"name",storeOptions:{storeState:t.store.peopleGroups,...t.options.store},formModalOptions:{moduleName:t.name,components:{formComponent:t.form.component,buttonIconComponent:t.form.createButtonIconComponent},routePath:t.routePath,width:t.form.modalWidthSize,hiddenFieldsOnEdit:t.dataTable.hiddenFieldsOnEdit,form:t.form.model}});return(p,n)=>{const d=W,i=V;return u(),w(A,null,[e(l)?N("",!0):(u(),y(d,{key:0},{left:a(()=>[g("b",null,C(e(s).translate("manage_people_groups")),1)]),right:a(()=>n[0]||(n[0]=[])),_:1})),o(i,{module:e(t),"store-options":e(r).storeOptions,"form-modal-options":e(r).formModalOptions,"search-by-field-name":e(r).searchByFieldName,"get-all":!1},null,8,["module","store-options","form-modal-options","search-by-field-name"])],64)}}}),nt=M({__name:"denominations",setup(S){const t=j.denominations,s=D(),{isMobile:l}=F(),r=T({loading:{page:!1},searchByFieldName:"name",storeOptions:{storeState:t.store.denominations,...t.options.store},formModalOptions:{moduleName:t.name,components:{formComponent:t.form.component,buttonIconComponent:t.form.createButtonIconComponent},routePath:t.routePath,width:t.form.modalWidthSize,hiddenFieldsOnEdit:t.dataTable.hiddenFieldsOnEdit,form:t.form.model}});return(p,n)=>{const d=W,i=V;return u(),w(A,null,[e(l)?N("",!0):(u(),y(d,{key:0},{left:a(()=>[g("b",null,C(e(s).translate("manage_denominations")),1)]),right:a(()=>n[0]||(n[0]=[])),_:1})),o(i,{module:e(t),"store-options":e(r).storeOptions,"form-modal-options":e(r).formModalOptions,"search-by-field-name":e(r).searchByFieldName,"get-all":!0},null,8,["module","store-options","form-modal-options","search-by-field-name"])],64)}}}),at=M({__name:"communityChecklists",setup(S){const t=j.communityChecklist,s=D(),{isMobile:l}=F(),r=T({loading:{page:!1},needToRefresh:!1,searchByFieldName:"name",storeOptions:{storeState:t.store.communityChecklists,...t.options.store},formModalOptions:{moduleName:t.name,components:{formComponent:t.form.component,buttonIconComponent:t.form.createButtonIconComponent},routePath:t.routePath,width:t.form.modalWidthSize,hiddenFieldsOnEdit:t.dataTable.hiddenFieldsOnEdit,form:t.form.model}}),p=X.COMMUNITY_CHECKLIST_UPDATE;return Ue(()=>{const i=_e().communityChecklists;console.log("Original Order",i)}),{render:{orderColumn:()=>{const d=t.dataTable.columns.find(i=>i.title==="Order");d&&(d.render=i=>{const m=_e(),_=te(()=>m.communityChecklists);function h(I){return async z=>{const P=_.value.find($=>$.id===z.id);if(!P)return;const R=P.order+I,G=_.value.find($=>$.order===R);G&&(G.order=P.order,P.order=R,await K(p).save(_.value)&&(r.needToRefresh=!0))}}const c=h(1),O=h(-1);return Y("div",{style:"display: flex; gap: 8px; align-items: center;"},[Y(Q,{size:"small",tertiary:!0,circle:!0,onClick:()=>c(i)},{icon:()=>Y(ie,null,{default:()=>Y(Qe)})}),Y(Q,{size:"small",tertiary:!0,circle:!0,onClick:()=>O(i)},{icon:()=>Y(ie,null,{default:()=>Y(Ye)})})])})}}}.render.orderColumn(),(d,i)=>{const m=W,_=V;return u(),w(A,null,[e(l)?N("",!0):(u(),y(m,{key:0},{left:a(()=>[g("b",null,C(e(l)?" ":e(s).translate("manage_community_checklist")),1)]),right:a(()=>i[1]||(i[1]=[])),_:1})),o(_,{module:e(t),"store-options":e(r).storeOptions,"form-modal-options":e(r).formModalOptions,"search-by-field-name":e(r).searchByFieldName,"get-all":!0,"need-to-refresh":e(r).needToRefresh,onRefreshed:i[0]||(i[0]=h=>e(r).needToRefresh=!1)},null,8,["module","store-options","form-modal-options","search-by-field-name","need-to-refresh"])],64)}}}),st=M({__name:"EditTranslationWord",props:{wordId:{type:Number,required:!0},disabledState:{type:Boolean,required:!0},selectedLanguage:{type:Number},translatedWord:{type:Object,required:!0}},setup(S){const t=D(),s=he(),l=q(""),r=ye(),p=S,n=T({data:{languages:[]},selectedTranslation:null,isNew:!1}),d=async()=>{const i={system_language_id:p.selectedLanguage,system_language_word_id:p.wordId,translation:l.value},m=localStorage.getItem("Bearer")||"";let _={Accept:"application/json","Content-Type":"application/json"};m&&(_.Authorization=m);const h=s.public.apiURL+(n.isNew?"languages/translations":"languages/translations/"+n.selectedTranslation.id);await $fetch(h,{method:n.isNew?"POST":"PUT",body:i,headers:_}),r.success({title:t.translate("word_saved")===""?"Word Translation Saved.":t.translate("word_saved"),duration:1500})};return le(()=>p.selectedLanguage,i=>{var _;if(!i)return;const m=(_=p.translatedWord)==null?void 0:_.find(h=>h.system_language_id===i);n.isNew=!m,n.selectedTranslation=m||null,l.value=(m==null?void 0:m.translation)||""}),(i,m)=>{const _=oe;return u(),y(_,{type:"text",size:"small",value:e(l),"onUpdate:value":m[0]||(m[0]=h=>de(l)?l.value=h:null),placeholder:e(t).translate("input_a_translated_word"),disabled:p.disabledState,onBlur:d},null,8,["value","placeholder","disabled"])}}}),lt={key:0},rt=M({__name:"SystemLanguageWord",props:{showModal:{type:Boolean,default:!1},editData:{type:[Boolean,Object]},storeOptions:{type:[Boolean,Object],default:()=>({storeState:ae().languages,isPersist:!0,key:"users"})}},emits:["modalClosed"],setup(S,{emit:t}){const s=X.LANGUAGE_WORDS,l=t,r=D(),p=S,n=T({editData:JSON.parse(JSON.stringify(p.editData))}),d={handleCloseModal(){l("modalClosed")},handleSave:async()=>{await K(s,p.editData!==!1?p.editData.id:void 0).save(n.editData,p.storeOptions),l("modalClosed")},handleEditWord(i){if(n.editData){const m=i.replace(/[\s\-–—]/g,"_").toLowerCase();n.editData.word=m,n.editData.id&&(n.editData.id=n.editData.id)}},helper:{hasUpdate(i){return typeof i.update=="function"}}};return le(()=>p.editData,i=>{i?n.editData=JSON.parse(JSON.stringify(i)):n.editData={word:""}}),(i,m)=>{const _=oe,h=Q,c=re,O=se,I=fe;return u(),y(I,{show:i.showModal,"transform-origin":"center","trap-focus":!0,"mask-closable":!1},{default:a(()=>[o(O,{style:{width:"600px"},title:`${p.editData?"Edit":"Create"} Word`,bordered:!1,size:"small",role:"dialog","aria-modal":"true"},{footer:a(()=>[o(c,{justify:"end"},{default:a(()=>[o(h,{type:"default",size:"small",onClick:d.handleCloseModal},{default:a(()=>[L(C(e(r).translate("cancel")),1)]),_:1},8,["onClick"]),o(h,{type:"primary",size:"small",onClick:d.handleSave},{default:a(()=>[L(C(e(r).translate("save")),1)]),_:1},8,["onClick"])]),_:1})]),default:a(()=>[e(n).editData!==!1?(u(),w("div",lt,[o(_,{type:"text",placeholder:"Input a word",value:e(n).editData.word,size:"small",onInput:d.handleEditWord},null,8,["value","onInput"])])):N("",!0)]),_:1},8,["title"])]),_:1},8,["show"])}}}),it=M({__name:"MobileEmpty",setup(S){return(t,s)=>{const l=ie,r=Ee;return u(),y(r,{class:"mobile-empty",description:"Please use this feature from a computer browser. It’s not available on mobile browsers.",size:"small"},{icon:a(()=>[o(l,null,{default:a(()=>[o(e(qe))]),_:1})]),_:1})}}}),me=Z(it,[["__scopeId","data-v-70f4f797"]]),dt={style:{width:"50%"}},ct={class:"controls"},mt=M({__name:"languages",setup(S){const t=q(void 0),s=D(),{isMobile:l}=F(),r={languages:X.LANGUAGES,words:X.LANGUAGE_WORDS},p={consumeLanguages:K(r.languages),consumeWords:K(r.words)},n=T({formStoreOptions:{},loading:{page:!1},show:{editModal:!1},data:{languages:[],words:[],initial_words:[],editData:{id:0,word:""},translations:{}},languagesStoreOptions:{storeState:ae().languages,isPersist:!0,key:"languages"},wordsStoreOptions:{storeState:ae().words,isPersist:!0,key:"words"}}),d={getData:async()=>{n.loading.page=!0;const m=await p.consumeLanguages.browse({all:!0,with:JSON.stringify(["translations"])},n.languagesStoreOptions);n.data.languages=m;const _=await p.consumeWords.browse({all:!0,with:JSON.stringify(["translations"])},n.wordsStoreOptions);n.data.words=_,n.data.initial_words=_,n.loading.page=!1},getTranslatedWord:m=>{const _=n.data.languages.find(c=>c.id===t.value);let h="";if(_&&_.translations){const c=_.translations.find(O=>O.system_language_word_id===m);c&&(h=c.translation)}return n.data.translations[m]={translation:h},h},handle:{change:{searchInput:m=>{const _=n.data.initial_words.filter(h=>h.word.includes(m));n.data.words=_}},click:{createWordButton:()=>{n.data.editData=!1,n.data.editData={id:null,word:""},n.formStoreOptions=n.wordsStoreOptions,n.show.editModal=!0}},openEditModal:m=>{n.show.editModal=!0,n.data.editData=m},modalClosed:()=>{d.getData(),n.show.editModal=!1},deleted:m=>{m&&d.getData()}}};d.getData();const i=te(()=>n.data.languages.map(m=>({label:m.name,value:m.id})));return(m,_)=>{const h=ce,c=W,O=oe,I=Q,z=Fe,P=Te,R=We,G=Me,$=re,b=st,f=Pe,U=ne,J=se,k=Re,H=rt,B=be,E=me;return e(l)?(u(),y(E,{key:1})):(u(),y(B,{key:0,style:{"max-height":"calc(100vh - 120px)"}},{default:a(()=>[o(k,{show:e(n).loading.page},{default:a(()=>[o(c,null,{left:a(()=>[g("b",null,C(e(s).translate("manage_system_languages")),1)]),right:a(()=>[g("div",null,[o(h,{placeholder:e(s).translate("select_language"),value:e(t),"onUpdate:value":_[0]||(_[0]=x=>de(t)?t.value=x:null),options:e(i),style:{width:"200px"}},null,8,["placeholder","value","options"])])]),_:1}),o(J,{size:"small"},{default:a(()=>[o(U,{vertical:"",size:10},{default:a(()=>[o(P,null,{default:a(()=>[o(O,{type:"text",placeholder:e(s).translate("search_word"),clearable:"",size:"small",onInput:d.handle.change.searchInput},null,8,["placeholder","onInput"]),o(z,{trigger:"hover"},{trigger:a(()=>[o(I,{type:"success",secondary:"",size:"small",onClick:d.handle.click.createWordButton},{icon:a(()=>[o(e(ke))]),_:1},8,["onClick"])]),default:a(()=>[L(" "+C(e(s).translate("create_word")),1)]),_:1})]),_:1}),o(f,{bordered:!0,"single-line":!0,class:"lang-table",size:"small"},{default:a(()=>[g("thead",null,[g("tr",null,[_[2]||(_[2]=g("th",{width:"470px"},"Word",-1)),_[3]||(_[3]=g("th",{style:{width:"120px","text-align":"center"}},null,-1)),g("th",dt,C(e(s).translate("translation")),1)])]),g("tbody",null,[(u(!0),w(A,null,ge(e(n).data.words,x=>(u(),w("tr",{key:x.id},[g("td",null,[o(R,{style:{"max-width":"400px"}},{default:a(()=>[L(C(x.word),1)]),_:2},1024)]),g("td",null,[g("div",ct,[o($,{justify:"center"},{default:a(()=>[o(I,{type:"warning",secondary:"",size:"small",onClick:ue=>d.handle.openEditModal(x)},{icon:a(()=>[o(e(xe))]),_:2},1032,["onClick"]),o(G,{id:x.id,model:r.words,onDeleteProgress:d.handle.deleted},null,8,["id","model","onDeleteProgress"])]),_:2},1024)])]),g("td",null,[Be([x.translations],()=>o(b,{"word-id":x.id,"disabled-state":!e(t),"selected-language":e(t),"translated-word":x.translations},null,8,["word-id","disabled-state","selected-language","translated-word"]),_,1)])]))),128))])]),_:1})]),_:1})]),_:1})]),_:1},8,["show"]),o(H,{"show-modal":e(n).show.editModal,"edit-data":e(n).data.editData,"store-options":e(n).formStoreOptions,onModalClosed:d.handle.modalClosed},null,8,["show-modal","edit-data","store-options","onModalClosed"])]),_:1}))}}}),ut=Z(mt,[["__scopeId","data-v-f118417d"]]),pt={class:"label"},_t={class:"noti-container"},ft={key:0,class:"time-container"},ht={class:"label"},gt={class:"time-selection"},yt=M({__name:"notifications",setup(S){const t=ae(),s=D(),{isMobile:l}=F(),r=[{value:"days",label:"Days"},{value:"weeks",label:"Weeks"},{value:"months",label:"Months"}],p=[{value:1,label:"Monday"},{value:2,label:"Tuesday"},{value:3,label:"Wednesday"},{value:4,label:"Thursday"},{value:5,label:"Friday"},{value:6,label:"Saturday"},{value:7,label:"Sunday"}],n=Array.from({length:31},(b,f)=>({value:f+1,label:`${f+1}${_(f+1)}`})),d=Array.from({length:12},(b,f)=>({value:f+1,label:`${f+1}`})),i=Array.from({length:60},(b,f)=>({value:f,label:f.toString().padStart(2,"0")})),m=[{value:"AM",label:"AM"},{value:"PM",label:"PM"}];function _(b){if(b>3&&b<21)return"th";switch(b%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}const h=()=>t.languages.reduce((b,f)=>(b[f.name]={id:f.id,title:"Venture Tools Reminder",body:"Example: Don't forget to check Venture Tools and update your church!"},b),{}),c=q({enabled:!1,intervalValue:1,intervalUnit:null,notificationMessage:h(),time:{hour:9,minute:0,ampm:"AM",dayOfWeek:1,dayOfMonth:1}}),O=X.NOTIFICATIONS,I=K(O),z=q(null),P=q(null),R=async()=>{var b;try{const f=await I.browse({all:!0});if(P.value=Array.isArray(f)&&f.length>0?f[0]:null,(b=P.value)!=null&&b.value){z.value=P.value.id??null;const U=JSON.parse(P.value.value);Object.assign(c.value,U)}}catch(f){console.error("Error fetching notification:",f)}},G=async()=>{try{const b={name:"notification_interval",value:JSON.stringify(c.value)};if(z.value)await K(O,z.value).save(b);else{const f=await I.save(b);z.value=f.id??null}}catch(b){console.error("Error saving notification:",b)}},$=te(()=>{const{enabled:b,intervalValue:f,intervalUnit:U,notificationMessage:J,time:k}=c.value,H=Object.values(J).some(({title:E,body:x})=>!(E!=null&&E.trim())||!(x!=null&&x.trim())),B=k.hour===void 0||k.minute===void 0||!k.ampm||U==="weeks"&&(k.dayOfWeek===void 0||k.dayOfWeek<1||k.dayOfWeek>7)||U==="months"&&(k.dayOfMonth===void 0||k.dayOfMonth<1||k.dayOfMonth>31);return!b||!f||!U||H||B});return le(()=>t.languages,b=>{b!=null&&b.length&&(c.value.notificationMessage=h())},{immediate:!0}),R(),(b,f)=>{const U=W,J=Ge,k=se,H=Ne,B=ce,E=oe,x=ne,ue=Q,Se=re,Oe=be,Ce=me;return u(),w(A,null,[e(l)?N("",!0):(u(),y(U,{key:0},{left:a(()=>f[8]||(f[8]=[g("b",null,"Manage Notification",-1)])),right:a(()=>f[9]||(f[9]=[])),_:1})),e(l)?(u(),y(Ce,{key:2})):(u(),y(Oe,{key:1,style:{height:"calc(100vh - 160px)"}},{default:a(()=>[o(k,{size:"small"},{default:a(()=>[o(x,{vertical:"",size:10},{default:a(()=>[o(k,{size:"small",title:e(s).translate("status")},{default:a(()=>[L(C(e(s).translate("enable_notification"))+"   ",1),o(J,{value:e(c).enabled,"onUpdate:value":f[0]||(f[0]=v=>e(c).enabled=v)},null,8,["value"])]),_:1},8,["title"]),o(k,{size:"small",title:e(s).translate("interval")},{default:a(()=>[g("div",pt,C(e(s).translate("how_often_should_the_notifications_be_sent")),1),g("div",_t,[g("div",null,C(e(s).translate("once_every")),1),o(H,{value:e(c).intervalValue,"onUpdate:value":f[1]||(f[1]=v=>e(c).intervalValue=v),placeholder:e(s).translate("please_enter_a_number"),min:1,disabled:!e(c).enabled,class:"input"},null,8,["value","placeholder","disabled"]),o(B,{placeholder:e(s).translate("please_select_unit"),value:e(c).intervalUnit,"onUpdate:value":f[2]||(f[2]=v=>e(c).intervalUnit=v),options:r,disabled:!e(c).enabled,class:"select"},null,8,["placeholder","value","disabled"])]),e(c).enabled&&e(c).intervalUnit?(u(),w("div",ft,[g("div",ht,C(e(s).translate("at_what_time")),1),g("div",gt,[e(c).intervalUnit==="weeks"?(u(),y(B,{key:0,value:e(c).time.dayOfWeek,"onUpdate:value":f[3]||(f[3]=v=>e(c).time.dayOfWeek=v),options:p,placeholder:e(s).translate("select_day"),class:"select"},null,8,["value","placeholder"])):N("",!0),e(c).intervalUnit==="months"?(u(),y(B,{key:1,value:e(c).time.dayOfMonth,"onUpdate:value":f[4]||(f[4]=v=>e(c).time.dayOfMonth=v),options:e(n),placeholder:e(s).translate("select_day"),class:"select"},null,8,["value","options","placeholder"])):N("",!0),o(B,{value:e(c).time.hour,"onUpdate:value":f[5]||(f[5]=v=>e(c).time.hour=v),options:e(d),placeholder:e(s).translate("hour"),class:"select"},null,8,["value","options","placeholder"]),o(B,{value:e(c).time.minute,"onUpdate:value":f[6]||(f[6]=v=>e(c).time.minute=v),options:e(i),placeholder:e(s).translate("minute"),class:"select"},null,8,["value","options","placeholder"]),o(B,{value:e(c).time.ampm,"onUpdate:value":f[7]||(f[7]=v=>e(c).time.ampm=v),options:m,placeholder:e(s).translate("am_pm"),class:"select"},null,8,["value","placeholder"])])])):N("",!0)]),_:1},8,["title"]),o(k,{size:"small",title:e(s).translate("message")},{default:a(()=>[o(x,{vertical:"",size:20},{default:a(()=>[(u(!0),w(A,null,ge(e(t).languages.sort((v,ee)=>v.id-ee.id),v=>(u(),y(k,{size:"small",title:e(s).translate(e(s).toSnakeCase(v.name))},{default:a(()=>[o(x,{size:20,vertical:""},{default:a(()=>[o(E,{value:e(c).notificationMessage[v.name].title,"onUpdate:value":ee=>e(c).notificationMessage[v.name].title=ee,placeholder:e(s).translate(e(s).toSnakeCase(`enter_the_message_title_in_${v.name}`)),disabled:!e(c).enabled,maxlength:"100","show-count":""},null,8,["value","onUpdate:value","placeholder","disabled"]),o(E,{value:e(c).notificationMessage[v.name].body,"onUpdate:value":ee=>e(c).notificationMessage[v.name].body=ee,placeholder:e(s).translate(e(s).toSnakeCase(`enter_the_message_body_in_${v.name}`)),disabled:!e(c).enabled,type:"textarea",maxlength:"200","show-count":""},null,8,["value","onUpdate:value","placeholder","disabled"])]),_:2},1024)]),_:2},1032,["title"]))),256))]),_:1})]),_:1},8,["title"]),o(Se,{justify:"end"},{default:a(()=>[o(ue,{type:"success",secondary:"",size:"medium",onClick:G,class:"button",disabled:e($)},{default:a(()=>[L(C(e(z)?"Update":"Create"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1}))],64)}}}),bt=Z(yt,[["__scopeId","data-v-9d3a07d1"]]),vt=M({__name:"movements",setup(S){const t=j.movements,{isMobile:s}=F(),l=T({loading:{page:!1},searchByFieldName:"name",storeOptions:{storeState:t.store.movements,...t.options.store},formModalOptions:{moduleName:t.name,components:{formComponent:t.form.component,buttonIconComponent:t.form.createButtonIconComponent},routePath:t.routePath,width:t.form.modalWidthSize,hiddenFieldsOnEdit:t.dataTable.hiddenFieldsOnEdit,form:t.form.model}});return(r,p)=>{const n=W,d=V;return u(),w(A,null,[e(s)?N("",!0):(u(),y(n,{key:0},{left:a(()=>p[0]||(p[0]=[g("b",null,"Manage Movements",-1)])),right:a(()=>p[1]||(p[1]=[])),_:1})),o(d,{module:e(t),"store-options":e(l).storeOptions,"form-modal-options":e(l).formModalOptions,"search-by-field-name":e(l).searchByFieldName,"get-all":!0},null,8,["module","store-options","form-modal-options","search-by-field-name"])],64)}}}),wt=M({__name:"prayerPrompts",setup(S){const t=j.prayerPrompts,s=D(),{isMobile:l}=F(),r=T({loading:{page:!1},searchByFieldName:"prompt_text",storeOptions:{storeState:t.store.prayerPrompts,...t.options.store},formModalOptions:{moduleName:t.name,components:{formComponent:t.form.component,buttonIconComponent:t.form.createButtonIconComponent},routePath:t.routePath,width:t.form.modalWidthSize,hiddenFieldsOnEdit:t.dataTable.hiddenFieldsOnEdit,form:t.form.model}}),p=te(()=>s.translate("manage_prayer_prompts")===""?"Manage Prayer Prompt":s.translate("manage_prayer_prompts"));return(n,d)=>{const i=W,m=V;return u(),w(A,null,[e(l)?N("",!0):(u(),y(i,{key:0},{left:a(()=>[g("b",null,C(e(p)),1)]),right:a(()=>d[0]||(d[0]=[])),_:1})),o(m,{module:e(t),"store-options":e(r).storeOptions,"form-modal-options":e(r).formModalOptions,"search-by-field-name":e(r).searchByFieldName,"get-all":!0},null,8,["module","store-options","form-modal-options","search-by-field-name"])],64)}}}),St={},Ot={style:{padding:"10px 0"}};function Ct(S,t){const s=ne;return u(),w("div",Ot,[o(s,{vertical:"",size:10},{default:a(()=>t[0]||(t[0]=[L(" Synchronize ")])),_:1})])}const Mt=Z(St,[["render",Ct]]),kt={style:{padding:"10px 0",width:"calc(100% - 10px)"}},xt=M({__name:"Configure",setup(S){const t=ye(),s=he(),l=localStorage.getItem("Bearer"),r=T({states:{disabled:{input:{username:!1,apiSecret:!1}}},form:{apiUsername:"",apiSecret:""}}),p={handleUsernameChange(){const n=p.callAPI("POST","settings/ishare/save",{setting_name:"iShareAPIUserName",setting_value:r.form.apiUsername});console.log(n)},handleSecretChange(){const n=p.callAPI("POST","settings/ishare/save",{setting_name:"iShareAPISecret",setting_value:r.form.apiSecret});console.log(n)},getSettings:async()=>{const n=await p.callAPI("GET","settings/ishare/get");n.length>0&&n.forEach(d=>{d.name==="iShareAPIUserName"&&(r.form.apiUsername=JSON.parse(d.value)),d.name==="iShareAPISecret"&&(r.form.apiSecret=JSON.parse(d.value))})},callAPI:async(n,d,i)=>{let m={Accept:"application/json","Content-Type":"application/json"};l&&(m.Authorization=l);const _={method:n,credentials:"include",headers:m};n==="POST"&&(_.body=i);const h=await $fetch(s.public.apiURL+d,_).catch(c=>{console.error(c),t.error({title:"Error",description:c.response.status+" "+c.response._data.message,duration:1e3,keepAliveOnHover:!0})});return n==="POST"&&t.success({title:"Success",description:"Settings saved successfully.",duration:1e3,keepAliveOnHover:!0}),h}};return p.getSettings(),(n,d)=>{const i=oe,m=Le,_=Ve,h=ne;return u(),w("div",kt,[o(h,{vertical:"",size:10},{default:a(()=>[o(_,{"label-placement":"left","label-width":"100",size:"small"},{default:a(()=>[o(m,{label:"Username"},{default:a(()=>[o(i,{value:e(r).form.apiUsername,"onUpdate:value":d[0]||(d[0]=c=>e(r).form.apiUsername=c),placeholder:"Username",onChange:p.handleUsernameChange},null,8,["value","onChange"])]),_:1}),o(m,{label:"API Secret"},{default:a(()=>[o(i,{value:e(r).form.apiSecret,"onUpdate:value":d[1]||(d[1]=c=>e(r).form.apiSecret=c),placeholder:"API Secret",onChange:p.handleSecretChange},null,8,["value","onChange"])]),_:1})]),_:1})]),_:1})])}}}),Tt=M({__name:"iShare",setup(S){const s=je().isMobile;return(l,r)=>{const p=Mt,n=ve,d=xt,i=we,m=me;return e(s)?(u(),y(m,{key:1})):(u(),y(i,{key:0,type:"line","default-value":"configure",style:{padding:"10px"}},{default:a(()=>[o(n,{name:"synchronize",tab:"Synchronize",class:pe({tab:!e(s)})},{default:a(()=>[o(p)]),_:1},8,["class"]),o(n,{name:"configure",tab:"Configure",class:pe({tab:!e(s)})},{default:a(()=>[o(d)]),_:1},8,["class"])]),_:1}))}}}),Pt=Z(Tt,[["__scopeId","data-v-43239f5c"]]),Nt={key:0},Dt={key:1},It={class:"mobile-select"},zt={class:"mobile-tab"},Ut=M({__name:"settings",setup(S){const t=Ae(),s=$e(),l=D(),r=q("users"),p=[{label:l.translate("users"),value:"users"},{label:l.translate("communication_platforms"),value:"communication_platforms"},{label:l.translate("faith_milestones"),value:"faith_milestones"},{label:l.translate("people_groups"),value:"people_groups"},{label:l.translate("denominations"),value:"denominations"},{label:l.translate("community_checklists"),value:"community_checklists"},{label:l.translate("languages"),value:"languages"},{label:l.translate("notifications"),value:"notifications"},{label:l.translate("movements"),value:"movements"},{label:l.translate("prayer_prompts"),value:"prayer_prompts"},{label:l.translate("ishare"),value:"ishare"}],n=q(window.innerWidth),d=te(()=>n.value<768);window.addEventListener("resize",()=>{n.value=window.innerWidth});const i=T({currentTab:t.query.settingType});"settingType"in t.query||s.push({query:{settingType:"users"}});const m={handleTabChange(_){i.currentTab=_,s.push({query:{settingType:_}})}};return le(()=>t.query.settingType,_=>{i.currentTab=_}),(_,h)=>{const c=Ze,O=ve,I=et,z=tt,P=ot,R=nt,G=at,$=ut,b=bt,f=vt,U=wt,J=Pt,k=we,H=ne,B=ce;return u(),w("div",null,[e(d)?(u(),w("div",Dt,[g("div",It,[o(B,{size:"small",value:e(r),"onUpdate:value":[h[0]||(h[0]=E=>de(r)?r.value=E:null),m.handleTabChange],options:p},null,8,["value","onUpdate:value"])]),g("div",zt,[e(i).currentTab==="users"?(u(),y(c,{key:0})):e(i).currentTab==="communication_platforms"?(u(),y(I,{key:1})):e(i).currentTab==="faith_milestones"?(u(),y(z,{key:2})):e(i).currentTab==="people_groups"?(u(),y(P,{key:3})):e(i).currentTab==="denominations"?(u(),y(R,{key:4})):e(i).currentTab==="community_checklists"?(u(),y(G,{key:5})):e(i).currentTab==="languages"?(u(),y($,{key:6})):e(i).currentTab==="notifications"?(u(),y(b,{key:7})):e(i).currentTab==="movements"?(u(),y(f,{key:8})):e(i).currentTab==="prayer_prompts"?(u(),y(U,{key:9})):e(i).currentTab==="ishare"?(u(),y(J,{key:10})):N("",!0)])])):(u(),w("div",Nt,[o(H,{vertical:""},{default:a(()=>[o(k,{type:"card",animated:"",placement:"left",value:e(i).currentTab,style:{height:"calc(100vh - 100px)"},"onUpdate:value":m.handleTabChange},{default:a(()=>[o(O,{name:"users",tab:e(l).translate("users"),class:"tab"},{default:a(()=>[o(c)]),_:1},8,["tab"]),o(O,{name:"communication_platforms",tab:e(l).translate("communication_platforms"),class:"tab"},{default:a(()=>[o(I)]),_:1},8,["tab"]),o(O,{name:"faith_milestones",tab:e(l).translate("faith_milestones"),class:"tab"},{default:a(()=>[o(z)]),_:1},8,["tab"]),o(O,{name:"people_groups",tab:e(l).translate("people_group"),class:"tab"},{default:a(()=>[o(P)]),_:1},8,["tab"]),o(O,{name:"denominations",tab:e(l).translate("denominations"),class:"tab"},{default:a(()=>[o(R)]),_:1},8,["tab"]),o(O,{name:"community_checklists",tab:e(l).translate("community_checklists"),class:"tab"},{default:a(()=>[o(G)]),_:1},8,["tab"]),o(O,{name:"languages",tab:e(l).translate("languages"),class:"tab"},{default:a(()=>[o($)]),_:1},8,["tab"]),o(O,{name:"notifications",tab:e(l).translate("notifications"),class:"tab"},{default:a(()=>[o(b)]),_:1},8,["tab"]),o(O,{name:"movements",tab:e(l).translate("movements"),class:"tab"},{default:a(()=>[o(f)]),_:1},8,["tab"]),o(O,{name:"prayer_prompts",tab:e(l).translate("prayer_prompts")!==""?e(l).translate("prayer_prompts"):"Prayer Prompts",class:"tab"},{default:a(()=>[o(U)]),_:1},8,["tab"]),o(O,{name:"ishare",tab:"iShare API",class:"tab"},{default:a(()=>[o(J)]),_:1})]),_:1},8,["value","onUpdate:value"])]),_:1})]))])}}}),fo=Z(Ut,[["__scopeId","data-v-3d35449e"]]);export{fo as default};
