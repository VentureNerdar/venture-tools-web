import{R as n,u as E}from"./Cb4rEbyZ.js";import{u as G}from"./Dl5l4Jgp.js";import{u as k,_ as U}from"./CWbIOrGm.js";import{b as _,u as S}from"./CVcB91rQ.js";import{u as A,a as M,b as I}from"./WEj28WKo.js";import{d as O,t as c,v as d,x as o,u as b,J as B,bt as V,L as i,z as g,M as h,R as z,as as W,y as C,A as L,B as q,_ as D}from"./XhYJCJRV.js";import{_ as F}from"./B6QQjn7s.js";import{N as J}from"./DX0NskRl.js";import"./_qxj-Ane.js";import"./BX0B_Ndo.js";import"./Caw8jftY.js";import"./B-p6aW7q.js";const $={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},H=O({name:"CheckRound",render:function(f,m){return c(),d("svg",$,m[0]||(m[0]=[o("path",{d:"M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41L9 16.17z",fill:"currentColor"},null,-1)]))}}),K={class:"wrap"},Y={style:{"text-align":"center"}},j={class:"load-list"},Q={key:0},X=O({__name:"splash",setup(w){const f=s=>new Promise(t=>setTimeout(t,s)),m=b(),e=B({completedModules:[],currentTaskText:"",defaultStoreOptions:{isPersist:!0},stores:{user:k(),languages:_(),settings:S()},logoLoaded:!1}),a={all:!0},x=[["User Roles",n.USERS_ROLES,"userRoles",{...e.defaultStoreOptions,key:"userRoles",storeState:k().userRoles},{...a,whereNotIn:{key:"id",value:[1,2]}}],["Languages",n.LANGUAGES,"languages",{...e.defaultStoreOptions,key:"languages",storeState:_().languages},{...a,with:JSON.stringify(["translations"])}],["Language Words",n.LANGUAGE_WORDS,"languageWords",{...e.defaultStoreOptions,key:"languageWords",storeState:_().words},a],["Statuses",n.SETTINGS_STATUSES,"statuses",{...e.defaultStoreOptions,key:"statuses",storeState:S().statuses},a],["People Groups",n.PEOPLE_GROUPS,"peopleGroups",{...e.defaultStoreOptions,key:"peopleGroups",storeState:A().peopleGroups},a],["Communication Platforms",n.COMMUNICATION_PLATFORMS,"communicationPlatforms",{...e.defaultStoreOptions,key:"communicationPlatforms",storeState:M().communicationPlatforms},a],["Community Checklists",n.COMMUNITY_CHECKLISTS,"communityChecklists",{...e.defaultStoreOptions,key:"communityChecklists",storeState:I().communityChecklists},a]],T=async()=>{for(const[s,t,r,l,p]of x){if(e.currentTaskText=`Fetching ${s}...`,await R(s,t,p,{...e.defaultStoreOptions,key:r,store:l}),s==="Languages"){const u=JSON.parse(localStorage.getItem("languages")||"[]"),v=S();let y;u&&(y=u.find(P=>P.locale==="en"),v.setUserPreferredLanguage(y))}await f(500),e.logoLoaded||(e.logoLoaded=!0)}N()},N=()=>{const s=G().authUser.user_role_id;console.log("Role",s);let t="/dashboard";s===4&&(t="/prayers"),m.push(t)},R=async(s,t,r,l)=>{await E(t).browse(r,l),e.completedModules.push(s),s==="Community Checklists"&&(e.currentTaskText="Redirecting . . . ")};return T(),(s,t)=>{const r=U,l=F,p=J;return c(),d(h,null,[o("div",K,[o("div",Y,[o("div",{class:V(`brand-logo ${i(e).logoLoaded?"loaded":""}`)}," VENTURE TOOLS ",2),t[0]||(t[0]=o("div",{class:"loading-text"},"L O A D I N G",-1)),g(r,{size:"small"})])]),o("div",j,[i(e).completedModules.length>0?(c(),d("div",Q,[(c(!0),d(h,null,z(i(e).completedModules,u=>(c(),d("div",{key:u},[g(p,null,{default:L(()=>[g(l,{type:"success"},{default:L(()=>[g(i(H))]),_:1})]),_:1}),q(" "+C(u),1)]))),128))])):W("",!0),o("div",null,C(i(e).currentTaskText),1),t[1]||(t[1]=o("div",{style:{clear:"both"}},null,-1))])],64)}}}),de=D(X,[["__scopeId","data-v-4092415d"]]);export{de as default};
