import{R as n,u as E}from"./DzVcP6yv.js";import{u as A}from"./ZFn9OHNj.js";import{u as y}from"./NlOOu2qL.js";import{b as S,u as f}from"./DWwVoZmy.js";import{a as k,c as C,u as V,b as J}from"./Cbi9z8oT.js";import{d as w,v as c,x as m,y as a,u as b,K as L,b0 as W,M as i,A as _,R as P,X as B,a7 as z,z as N,B as R,C as F,_ as q}from"./ClsKkY77.js";import{_ as D}from"./BxldiPTT.js";import{_ as $}from"./TJ3V2j9U.js";import{N as K}from"./CrwjzCR1.js";import"./JCo7lX2X.js";import"./Z64IoYvD.js";import"./B-p6aW7q.js";const H={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},X=w({name:"CheckRound",render:function(O,p){return c(),m("svg",H,p[0]||(p[0]=[a("path",{d:"M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41L9 16.17z",fill:"currentColor"},null,-1)]))}}),Y={class:"wrap"},j={style:{"text-align":"center"}},Q={class:"load-list"},Z={key:0},ee=w({__name:"splash",setup(x){const O=t=>new Promise(o=>setTimeout(o,t)),p=b(),s=L({completedModules:[],currentTaskText:"",defaultStoreOptions:{isPersist:!0},stores:{user:y(),languages:S(),settings:f()},logoLoaded:!1}),r={all:!0},T=[["User Roles",n.USERS_ROLES,"userRoles",{...s.defaultStoreOptions,key:"userRoles",storeState:y().userRoles},{...r}],["Languages",n.LANGUAGES,"languages",{...s.defaultStoreOptions,key:"languages",storeState:S().languages},{...r,with:JSON.stringify(["translations"])}],["Language Words",n.LANGUAGE_WORDS,"languageWords",{...s.defaultStoreOptions,key:"languageWords",storeState:S().words},r],["Statuses",n.SETTINGS_STATUSES,"statuses",{...s.defaultStoreOptions,key:"statuses",storeState:f().statuses},r],["People Groups",n.PEOPLE_GROUPS,"peopleGroups",{...s.defaultStoreOptions,key:"peopleGroups",storeState:k().peopleGroups},r],["Communication Platforms",n.COMMUNICATION_PLATFORMS,"communicationPlatforms",{...s.defaultStoreOptions,key:"communicationPlatforms",storeState:C().communicationPlatforms},r],["Community Checklists",n.COMMUNITY_CHECKLISTS,"communityChecklists",{...s.defaultStoreOptions,key:"communityChecklists",storeState:V().communityChecklists},r]],l=L({faithMilestoneStore:J(),settings:f(),peopleGroupStore:k(),languageStore:S(),communicationPlatformStore:C(),userStore:y()}),G=async()=>{for(const[t,o,g,u,d]of T){if(s.currentTaskText=`Fetching ${t}...`,await I(t,o,d,u),t==="Languages"){const e=JSON.parse(localStorage.getItem("languages")||"[]"),U=f();let h;e&&(h=e.find(M=>M.locale==="en"),U.setUserPreferredLanguage(h))}if(t==="Statuses"){const e=JSON.parse(localStorage.getItem("statuses")||"[]");l.settings.setStatuses(e)}if(t==="People Groups"){const e=JSON.parse(localStorage.getItem("peopleGroups")||"[]");l.peopleGroupStore.setPeopleGroups(e)}if(t==="Language Words"){const e=JSON.parse(localStorage.getItem("languageWords")||"[]");l.languageStore.setWords(e)}if(t==="Languages"){const e=JSON.parse(localStorage.getItem("languages")||"[]");l.languageStore.setLanguages(e)}if(t==="Communication Platforms"){const e=JSON.parse(localStorage.getItem("communicationPlatforms")||"[]");l.communicationPlatformStore.setCommunicationPlatforms(e)}if(t==="User Roles"){const e=JSON.parse(localStorage.getItem("userRoles")||"[]");l.userStore.setUserRoles(e)}await O(200),s.logoLoaded||(s.logoLoaded=!0)}v()},v=()=>{const t=A().authUser.user_role_id;let o="/dashboard";(t===4||t===3)&&(o="/prayers"),p.push(o)},I=async(t,o,g,u)=>{const e=await E(o).browse(g,u);return s.completedModules.push(t),t==="Community Checklists"&&(s.currentTaskText="Redirecting . . . "),e};return G(),(t,o)=>{const g=D,u=$,d=K;return c(),m(P,null,[a("div",Y,[a("div",j,[a("div",{class:W(`brand-logo ${i(s).logoLoaded?"loaded":""}`)}," VENTURE TOOLS ",2),o[0]||(o[0]=a("div",{class:"loading-text"},"L O A D I N G",-1)),_(g,{size:"small"})])]),a("div",Q,[i(s).completedModules.length>0?(c(),m("div",Z,[(c(!0),m(P,null,B(i(s).completedModules,e=>(c(),m("div",{key:e},[_(d,null,{default:R(()=>[_(u,{type:"success"},{default:R(()=>[_(i(X))]),_:1})]),_:1}),F(" "+N(e),1)]))),128))])):z("",!0),a("div",null,N(i(s).currentTaskText),1),o[1]||(o[1]=a("div",{style:{clear:"both"}},null,-1))])],64)}}}),ge=q(ee,[["__scopeId","data-v-11d9f912"]]);export{ge as default};
