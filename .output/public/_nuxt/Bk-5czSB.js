import{R as c,u}from"./FMEwghvL.js";import{a as h}from"./DTcZItxP.js";import{d as S,r as d,K as y,j as E,x as U,A as k,M as s,W as z,h as C,v as M}from"./CafCBvvZ.js";import{_ as R}from"./u_iVrcfx.js";import{_ as b}from"./DRZv8yay.js";import"./BgZJJq5E.js";import"./BQ8t6om7.js";import"./FKgqJ6m9.js";import"./B-p6aW7q.js";import"./Db_fXYBw.js";import"./5Dzc0Zgl.js";import"./BNE1SZW2.js";import"./C5Ksf8W7.js";import"./BPQbpWuO.js";import"./BmXxLIqD.js";import"./Bk_rJcZu.js";import"./B_F8gQd8.js";import"./3zl49Ym3.js";const Q=S({__name:"movement-users",setup(w){const _=c.MOVEMENT_USERS,f=u(_),i=h(),r=d([]),p=d(!1),t=y({page:1,pageSize:5,showSizePicker:!0,pageSizes:[5,10,20,30,40],itemCount:0,onChange:e=>{t.page=e,l()},onUpdatePageSize:e=>{t.pageSize=e,t.page=1,l()}}),g=E(()=>[{title:i.translate("name"),width:200,key:"name"},{title:i.translate("email"),width:200,key:"email"},{title:i.translate("phone"),width:200,key:"phone_number"},{title:i.translate("verified"),width:200,key:"is_verified",render(e){return C(R,{value:e.is_verified,size:"small","onUpdate:value":async a=>{if(e.is_verified)return;const n=r.value.find(o=>o.id===e.id);if(n){const o={user_id:e.id},v=c.MOVEMENT_USER_VERIFICATIONS,m=await u(v).save(o);m&&(n.is_verified=m.is_verified)}}})}}]),l=async()=>{p.value=!0;const e={all:!1,page:t.page,per_page:t.pageSize};try{const a=await f.browse(e);a&&(r.value=a.data,t.itemCount=a.total)}catch(a){console.error("Failed to fetch data",a)}finally{p.value=!1}};return l(),(e,a)=>{const n=b;return M(),U("div",null,[k(n,{columns:s(g),data:s(r),bordered:!1,remote:!0,loading:s(p),pagination:s(t),"onUpdate:pagination":a[0]||(a[0]=o=>z(t)?t.value=o:null),"max-height":"calc(100vh - 304px)"},null,8,["columns","data","loading","pagination"])])}}});export{Q as default};
