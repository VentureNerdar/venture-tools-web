import{R as c,u}from"./BBjd8h0q.js";import{a as h}from"./B2BENFcM.js";import{m as S,r as d,n as y,D as E,c as U,b as k,u as s,H as z,q as b,o as C}from"./YtHq8OO6.js";import{_ as R}from"./efVdIykZ.js";import{_ as w}from"./CJUhunLf.js";import"./CZO7QJqz.js";import"./DZz3KrMK.js";import"./9v5S6Rov.js";import"./GFjlQxcy.js";import"./aMVoUiyk.js";import"./CZQEHcvQ.js";import"./bhMipCmH.js";import"./CO5yzLcq.js";import"./BV9Ru5aN.js";const J=S({__name:"movement-users",setup(M){const _=c.MOVEMENT_USERS,f=u(_),o=h(),r=d([]),l=d(!1),t=y({page:1,pageSize:5,showSizePicker:!0,pageSizes:[5,10,20,30,40],itemCount:0,onChange:e=>{t.page=e,p()},onUpdatePageSize:e=>{t.pageSize=e,t.page=1,p()}}),g=E(()=>[{title:o.translate("name"),width:200,key:"name"},{title:o.translate("email"),width:200,key:"email"},{title:o.translate("phone"),width:200,key:"phone_number"},{title:o.translate("verified"),width:200,key:"is_verified",render(e){return b(R,{value:e.is_verified,size:"small","onUpdate:value":async a=>{if(e.is_verified)return;const i=r.value.find(n=>n.id===e.id);if(i){const n={user_id:e.id},v=c.MOVEMENT_USER_VERIFICATIONS,m=await u(v).save(n);m&&(i.is_verified=m.is_verified)}}})}}]),p=async()=>{l.value=!0;const e={all:!1,page:t.page,per_page:t.pageSize};try{const a=await f.browse(e);a&&(r.value=a.data,t.itemCount=a.total)}catch(a){console.error("Failed to fetch data",a)}finally{l.value=!1}};return p(),(e,a)=>{const i=w;return C(),U("div",null,[k(i,{columns:s(g),data:s(r),bordered:!1,remote:!0,loading:s(l),pagination:s(t),"onUpdate:pagination":a[0]||(a[0]=n=>z(t)?t.value=n:null),"max-height":"calc(100vh - 304px)"},null,8,["columns","data","loading","pagination"])])}}});export{J as default};
