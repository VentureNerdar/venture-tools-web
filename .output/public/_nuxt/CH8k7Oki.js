import{R as n,u as E}from"./CrrtV40Q.js";import{u as A}from"./Co_9Y-fu.js";import{u as y,_ as V}from"./DyDn1iz3.js";import{b as S,u as f}from"./RQ4q0ijU.js";import{u as k,b as L,c as J,a as b}from"./Doo2vnQt.js";import{d as w,t as c,v as m,x as a,u as W,J as C,bu as B,L as i,z as _,M as P,R as z,as as F,y as N,A as R,B as q,_ as D}from"./wohrC8MQ.js";import{_ as $}from"./C1zEjI3R.js";import{N as H}from"./Cu61A4SA.js";import"./Cs3qsX1g.js";import"./DD5Y_nqY.js";import"./BwJyIYEz.js";import"./B-p6aW7q.js";const K={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Y=w({name:"CheckRound",render:function(O,p){return c(),m("svg",K,p[0]||(p[0]=[a("path",{d:"M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41L9 16.17z",fill:"currentColor"},null,-1)]))}}),j={class:"wrap"},Q={style:{"text-align":"center"}},X={class:"load-list"},Z={key:0},ee=w({__name:"splash",setup(x){const O=t=>new Promise(o=>setTimeout(o,t)),p=W(),s=C({completedModules:[],currentTaskText:"",defaultStoreOptions:{isPersist:!0},stores:{user:y(),languages:S(),settings:f()},logoLoaded:!1}),r={all:!0},T=[["User Roles",n.USERS_ROLES,"userRoles",{...s.defaultStoreOptions,key:"userRoles",storeState:y().userRoles},{...r}],["Languages",n.LANGUAGES,"languages",{...s.defaultStoreOptions,key:"languages",storeState:S().languages},{...r,with:JSON.stringify(["translations"])}],["Language Words",n.LANGUAGE_WORDS,"languageWords",{...s.defaultStoreOptions,key:"languageWords",storeState:S().words},r],["Statuses",n.SETTINGS_STATUSES,"statuses",{...s.defaultStoreOptions,key:"statuses",storeState:f().statuses},r],["People Groups",n.PEOPLE_GROUPS,"peopleGroups",{...s.defaultStoreOptions,key:"peopleGroups",storeState:k().peopleGroups},r],["Communication Platforms",n.COMMUNICATION_PLATFORMS,"communicationPlatforms",{...s.defaultStoreOptions,key:"communicationPlatforms",storeState:L().communicationPlatforms},r],["Community Checklists",n.COMMUNITY_CHECKLISTS,"communityChecklists",{...s.defaultStoreOptions,key:"communityChecklists",storeState:J().communityChecklists},r]],l=C({faithMilestoneStore:b(),settings:f(),peopleGroupStore:k(),languageStore:S(),communicationPlatformStore:L(),userStore:y()}),G=async()=>{for(const[t,o,g,u,d]of T){if(s.currentTaskText=`Fetching ${t}...`,await I(t,o,d,u),t==="Languages"){const e=JSON.parse(localStorage.getItem("languages")||"[]"),U=f();let h;e&&(h=e.find(M=>M.locale==="en"),U.setUserPreferredLanguage(h))}if(t==="Statuses"){const e=JSON.parse(localStorage.getItem("statuses")||"[]");l.settings.setStatuses(e)}if(t==="People Groups"){const e=JSON.parse(localStorage.getItem("peopleGroups")||"[]");l.peopleGroupStore.setPeopleGroups(e)}if(t==="Language Words"){const e=JSON.parse(localStorage.getItem("languageWords")||"[]");l.languageStore.setWords(e)}if(t==="Languages"){const e=JSON.parse(localStorage.getItem("languages")||"[]");l.languageStore.setLanguages(e)}if(t==="Communication Platforms"){const e=JSON.parse(localStorage.getItem("communicationPlatforms")||"[]");l.communicationPlatformStore.setCommunicationPlatforms(e)}if(t==="User Roles"){const e=JSON.parse(localStorage.getItem("userRoles")||"[]");l.userStore.setUserRoles(e)}await O(200),s.logoLoaded||(s.logoLoaded=!0)}v()},v=()=>{const t=A().authUser.user_role_id;let o="/dashboard";t===4&&(o="/prayers"),p.push(o)},I=async(t,o,g,u)=>{const e=await E(o).browse(g,u);return s.completedModules.push(t),t==="Community Checklists"&&(s.currentTaskText="Redirecting . . . "),e};return G(),(t,o)=>{const g=V,u=$,d=H;return c(),m(P,null,[a("div",j,[a("div",Q,[a("div",{class:B(`brand-logo ${i(s).logoLoaded?"loaded":""}`)}," VENTURE TOOLS ",2),o[0]||(o[0]=a("div",{class:"loading-text"},"L O A D I N G",-1)),_(g,{size:"small"})])]),a("div",X,[i(s).completedModules.length>0?(c(),m("div",Z,[(c(!0),m(P,null,z(i(s).completedModules,e=>(c(),m("div",{key:e},[_(d,null,{default:R(()=>[_(u,{type:"success"},{default:R(()=>[_(i(Y))]),_:1})]),_:1}),q(" "+N(e),1)]))),128))])):F("",!0),a("div",null,N(i(s).currentTaskText),1),o[1]||(o[1]=a("div",{style:{clear:"both"}},null,-1))])],64)}}}),ge=D(ee,[["__scopeId","data-v-68eef4af"]]);export{ge as default};
