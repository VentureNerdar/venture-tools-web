import{R as c,u}from"./Z9mtmCOJ.js";import{a as h}from"./BD8ut38M.js";import{d as S,r as d,K as y,j as E,x as U,A as k,M as s,W as z,h as C,v as M}from"./CvgJilO_.js";import{_ as R}from"./4cg3_Ts7.js";import{_ as b}from"./CtoA_jqh.js";import"./BjVeTqPo.js";import"./DwBiJwwL.js";import"./CMCM9tz_.js";import"./BYxVFWBK.js";import"./Bk_rJcZu.js";import"./Bhdl31lx.js";import"./sDTwY0VO.js";import"./Dpyx7mFK.js";import"./Capxcjv2.js";const q=S({__name:"movement-users",setup(w){const _=c.MOVEMENT_USERS,f=u(_),o=h(),r=d([]),l=d(!1),t=y({page:1,pageSize:5,showSizePicker:!0,pageSizes:[5,10,20,30,40],itemCount:0,onChange:e=>{t.page=e,p()},onUpdatePageSize:e=>{t.pageSize=e,t.page=1,p()}}),g=E(()=>[{title:o.translate("name"),width:200,key:"name"},{title:o.translate("email"),width:200,key:"email"},{title:o.translate("phone"),width:200,key:"phone_number"},{title:o.translate("verified"),width:200,key:"is_verified",render(e){return C(R,{value:e.is_verified,size:"small","onUpdate:value":async a=>{if(e.is_verified)return;const i=r.value.find(n=>n.id===e.id);if(i){const n={user_id:e.id},v=c.MOVEMENT_USER_VERIFICATIONS,m=await u(v).save(n);m&&(i.is_verified=m.is_verified)}}})}}]),p=async()=>{l.value=!0;const e={all:!1,page:t.page,per_page:t.pageSize};try{const a=await f.browse(e);a&&(r.value=a.data,t.itemCount=a.total)}catch(a){console.error("Failed to fetch data",a)}finally{l.value=!1}};return p(),(e,a)=>{const i=b;return M(),U("div",null,[k(i,{columns:s(g),data:s(r),bordered:!1,remote:!0,loading:s(l),pagination:s(t),"onUpdate:pagination":a[0]||(a[0]=n=>z(t)?t.value=n:null),"max-height":"calc(100vh - 304px)"},null,8,["columns","data","loading","pagination"])])}}});export{q as default};
