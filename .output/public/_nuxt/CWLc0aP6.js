import{R as n,u as M}from"./iRh0XMeS.js";import{b as A}from"./C45RVbce.js";import{u as y,_ as V}from"./Bh-dvM22.js";import{b as S,u as f,N as b}from"./CIpPGm0y.js";import{a as k,c as C,u as J,b as W}from"./RsHePYmS.js";import{m as R,o as c,c as m,a,Y as F,n as L,z,u as i,b as _,F as P,I as B,E as $,t as N,w,d as q,_ as D}from"./BxpEjOof.js";import{_ as Y}from"./BUV_O0Pv.js";import"./Cm9BH2tJ.js";const H={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},K=R({name:"CheckRound",render:function(O,p){return c(),m("svg",H,p[0]||(p[0]=[a("path",{d:"M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41L9 16.17z",fill:"currentColor"},null,-1)]))}}),j={class:"wrap"},Q={style:{"text-align":"center"}},X={class:"load-list"},Z={key:0},ee=R({__name:"splash",setup(T){const O=t=>new Promise(o=>setTimeout(o,t)),p=F(),s=L({completedModules:[],currentTaskText:"",defaultStoreOptions:{isPersist:!0},stores:{user:y(),languages:S(),settings:f()},logoLoaded:!1}),r={all:!0},x=[["User Roles",n.USERS_ROLES,"userRoles",{...s.defaultStoreOptions,key:"userRoles",storeState:y().userRoles},{...r}],["Languages",n.LANGUAGES,"languages",{...s.defaultStoreOptions,key:"languages",storeState:S().languages},{...r,with:JSON.stringify(["translations"])}],["Language Words",n.LANGUAGE_WORDS,"languageWords",{...s.defaultStoreOptions,key:"languageWords",storeState:S().words},r],["Statuses",n.SETTINGS_STATUSES,"statuses",{...s.defaultStoreOptions,key:"statuses",storeState:f().statuses},r],["People Groups",n.PEOPLE_GROUPS,"peopleGroups",{...s.defaultStoreOptions,key:"peopleGroups",storeState:k().peopleGroups},r],["Communication Platforms",n.COMMUNICATION_PLATFORMS,"communicationPlatforms",{...s.defaultStoreOptions,key:"communicationPlatforms",storeState:C().communicationPlatforms},r],["Community Checklists",n.COMMUNITY_CHECKLISTS,"communityChecklists",{...s.defaultStoreOptions,key:"communityChecklists",storeState:J().communityChecklists},r]],l=L({faithMilestoneStore:W(),settings:f(),peopleGroupStore:k(),languageStore:S(),communicationPlatformStore:C(),userStore:y()}),G=async()=>{for(const[t,o,g,u,d]of x){if(s.currentTaskText=`Fetching ${t}...`,await v(t,o,d,u),t==="Languages"){const e=JSON.parse(localStorage.getItem("languages")||"[]"),U=f();let h;e&&(h=e.find(E=>E.locale==="en"),U.setUserPreferredLanguage(h))}if(t==="Statuses"){const e=JSON.parse(localStorage.getItem("statuses")||"[]");l.settings.setStatuses(e)}if(t==="People Groups"){const e=JSON.parse(localStorage.getItem("peopleGroups")||"[]");l.peopleGroupStore.setPeopleGroups(e)}if(t==="Language Words"){const e=JSON.parse(localStorage.getItem("languageWords")||"[]");l.languageStore.setWords(e)}if(t==="Languages"){const e=JSON.parse(localStorage.getItem("languages")||"[]");l.languageStore.setLanguages(e)}if(t==="Communication Platforms"){const e=JSON.parse(localStorage.getItem("communicationPlatforms")||"[]");l.communicationPlatformStore.setCommunicationPlatforms(e)}if(t==="User Roles"){const e=JSON.parse(localStorage.getItem("userRoles")||"[]");l.userStore.setUserRoles(e)}await O(200),s.logoLoaded||(s.logoLoaded=!0)}I()},I=()=>{const t=A().authUser.user_role_id;let o="/dashboard";(t===4||t===3)&&(o="/prayers"),p.push(o)},v=async(t,o,g,u)=>{const e=await M(o).browse(g,u);return s.completedModules.push(t),t==="Community Checklists"&&(s.currentTaskText="Redirecting . . . "),e};return G(),(t,o)=>{const g=V,u=Y,d=b;return c(),m(P,null,[a("div",j,[a("div",Q,[a("div",{class:z(`brand-logo ${i(s).logoLoaded?"loaded":""}`)}," VENTURE TOOLS ",2),o[0]||(o[0]=a("div",{class:"loading-text"},"L O A D I N G",-1)),_(g,{size:"small"})])]),a("div",X,[i(s).completedModules.length>0?(c(),m("div",Z,[(c(!0),m(P,null,B(i(s).completedModules,e=>(c(),m("div",{key:e},[_(d,null,{default:w(()=>[_(u,{type:"success"},{default:w(()=>[_(i(K))]),_:1})]),_:1}),q(" "+N(e),1)]))),128))])):$("",!0),a("div",null,N(i(s).currentTaskText),1),o[1]||(o[1]=a("div",{style:{clear:"both"}},null,-1))])],64)}}}),ie=D(ee,[["__scopeId","data-v-9e1d1c28"]]);export{ie as default};
