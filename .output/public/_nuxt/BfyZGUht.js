import{u as g,R as P}from"./CpTWQXB8.js";import{b as O,a as $,N as H}from"./ClgYNStd.js";import{C as I}from"./RMddxVMQ.js";import{P as A}from"./BaTspl6Z.js";import{P as W}from"./PbunOcet.js";import{d as D,r as T,K as U,N as V,x as C,A as r,B as a,R as v,v as u,y as n,M as o,C as l,z as s,X as B,L as M,P as J,_ as F}from"./DOkca_St.js";import{a as G,_ as K}from"./Nap-21Hx.js";import{_ as X}from"./D4Rp5Yhg.js";import{_ as j}from"./CQ-_7HJj.js";import{_ as q}from"./Da3NOjgm.js";import{_ as Q,a as Z}from"./DBVAVT9p.js";import"./BLqpIeij.js";import"./B1aprbyB.js";import"./Bk_rJcZu.js";import"./Bo7P25GB.js";const ee={class:"center-vertically"},re={class:"center-vertically"},ae={class:"center-vertically"},te={class:"load-more"},ne=D({__name:"prayers",async setup(oe){let p,k;const Y=O();console.log("Language Words:",{storeWords:Y.words,localStorageWords:JSON.parse(localStorage.getItem("languageWords")||"[]")});const h={prayers:g(P.SETTINGS_PRAYERS),churchPrayerCount:g(P.CHURCH_PRAYER_COUNT),contactPrayerCount:g(P.CONTACT_PRAYER_COUNT)},N=$(),m=T(2),w=T(!0),c=U({prayers:{}}),_={handle:{click:{contactPrayerCount:async e=>{if(e.user_has_prayed)return;await h.contactPrayerCount.save({contact_id:e.id})&&(e.user_has_prayed=!0,e.prayer_count+=1)},churchPrayerCount:async e=>{if(e.user_has_prayed)return;await h.churchPrayerCount.save({church_id:e.id})&&(e.user_has_prayed=!0,e.prayer_count+=1)},formattedPrayerCount:e=>e.user_has_prayed?e.prayer_count===1?"You prayed for this":e.prayer_count===2?"You and 1 other prayed for this":`You and ${e.prayer_count-1} others prayed for this`:e.prayer_count===1?"1 person prayed for this":e.prayer_count===0?"No one prayed for this":`${e.prayer_count} people prayed for this`,loadMore:async()=>{m.value+=m.value;const e=await _.handle.fetchPrayers();if(c.prayers.churchPrayers.length==e.churchPrayers.length&&c.prayers.contactPrayers.length==e.contactPrayers.length){w.value=!1;return}c.prayers.churchPrayers=e.churchPrayers,c.prayers.contactPrayers=e.contactPrayers}},fetchPrayers:async()=>await h.prayers.browse({with:JSON.stringify(m.value)},!1)}};return c.prayers=([p,k]=V(()=>_.handle.fetchPrayers()),p=await p,k(),p),console.log("Prayers:",c.prayers),(e,z)=>{const i=H,R=X,d=j,y=q,x=Q,S=Z,f=K,b=G,E=J;return u(),C(v,null,[r(b,{"x-gap":"10",cols:"3"},{default:a(()=>[r(f,null,{default:a(()=>[n("h4",ee,[r(i,{component:o(I),size:20},null,8,["component"]),l("   "+s(o(N).translate("churches_prayers"))+"   ",1),r(R,{bordered:!1,size:"small",type:"info"},{default:a(()=>[l(s(o(c).prayers.churchPrayers.length),1)]),_:1})]),r(y,{size:10,vertical:""},{default:a(()=>[r(S,{bordered:""},{default:a(()=>[(u(!0),C(v,null,B(o(c).prayers.churchPrayers,t=>(u(),M(x,null,{default:a(()=>[r(y,{size:10,vertical:""},{default:a(()=>[n("div",re,[n("b",null,s(t.name),1)]),n("div",null,[r(d,{depth:3},{default:a(()=>[l(s(t.current_prayers),1)]),_:2},1024)]),n("div",null,[r(d,{type:t.user_has_prayed?"primary":"secondary"},{default:a(()=>[r(i,{component:o(A),size:16,class:"praying-hands",onClick:L=>_.handle.click.churchPrayerCount(t)},null,8,["component","onClick"]),l("   "+s(_.handle.click.formattedPrayerCount(t)),1)]),_:2},1032,["type"])])]),_:2},1024)]),_:2},1024))),256))]),_:1})]),_:1})]),_:1}),r(f,null,{default:a(()=>[n("h4",ae,[r(i,{component:o(W),size:20},null,8,["component"]),l("   "+s(o(N).translate("assigned_contacts_prayers"))+"   ",1),r(R,{bordered:!1,size:"small",type:"info"},{default:a(()=>[l(s(o(c).prayers.contactPrayers.length),1)]),_:1})]),r(y,{size:10,vertical:""},{default:a(()=>[r(S,{bordered:""},{default:a(()=>[(u(!0),C(v,null,B(o(c).prayers.contactPrayers,t=>(u(),M(x,null,{default:a(()=>[r(y,{size:10,vertical:""},{default:a(()=>[n("div",null,[n("b",null,s(t.name),1)]),n("div",null,[r(d,{depth:3},{default:a(()=>[l(s(t.current_prayers),1)]),_:2},1024)]),n("div",null,[r(d,{type:t.user_has_prayed?"primary":"secondary"},{default:a(()=>[r(i,{component:o(A),size:16,class:"praying-hands",onClick:L=>_.handle.click.contactPrayerCount(t)},null,8,["component","onClick"]),l("   "+s(_.handle.click.formattedPrayerCount(t))+"   ",1)]),_:2},1032,["type"])])]),_:2},1024)]),_:2},1024))),256))]),_:1})]),_:1})]),_:1})]),_:1}),r(b,{"x-gap":"10",cols:"3",class:"wrapper"},{default:a(()=>[r(f,{span:2},{default:a(()=>[n("div",te,[r(E,{text:"",type:"primary",size:"small",onClick:_.handle.click.loadMore},{default:a(()=>[l(s(o(w)?"Load More ...":"No More Data"),1)]),_:1},8,["onClick"])])]),_:1})]),_:1})],64)}}}),ve=F(ne,[["__scopeId","data-v-20d0fc10"]]);export{ve as default};
