import{R as c,u}from"./DS-kRQLf.js";import{a as h}from"./C01nUmCt.js";import{d as S,r as d,K as y,j as E,v as U,x as k,A as z,M as s,R,h as C}from"./GCT0zxdb.js";import{_ as M}from"./JrfX2h79.js";import{_ as b}from"./33wQEKce.js";import"./CpTsecKK.js";import"./DKN-R7U0.js";import"./DcEpzLML.js";import"./BAqEG-yS.js";import"./B-p6aW7q.js";import"./BfIyY6ig.js";import"./DiMBbo-f.js";import"./B4q8ePhz.js";import"./rrzBb7gs.js";import"./DHp01vku.js";import"./Bk_rJcZu.js";import"./DauuM1mT.js";import"./qjyT1jqi.js";const Q=S({__name:"movement-users",setup(w){const _=c.MOVEMENT_USERS,f=u(_),i=h(),r=d([]),p=d(!1),t=y({page:1,pageSize:5,showSizePicker:!0,pageSizes:[5,10,20,30,40],itemCount:0,onChange:e=>{t.page=e,l()},onUpdatePageSize:e=>{t.pageSize=e,t.page=1,l()}}),g=E(()=>[{title:i.translate("name"),width:200,key:"name"},{title:i.translate("email"),width:200,key:"email"},{title:i.translate("phone"),width:200,key:"phone_number"},{title:i.translate("verified"),width:200,key:"is_verified",render(e){return C(M,{value:e.is_verified,size:"small","onUpdate:value":async a=>{if(e.is_verified)return;const n=r.value.find(o=>o.id===e.id);if(n){const o={user_id:e.id},v=c.MOVEMENT_USER_VERIFICATIONS,m=await u(v).save(o);m&&(n.is_verified=m.is_verified)}}})}}]),l=async()=>{p.value=!0;const e={all:!1,page:t.page,per_page:t.pageSize};try{const a=await f.browse(e);a&&(r.value=a.data,t.itemCount=a.total)}catch(a){console.error("Failed to fetch data",a)}finally{p.value=!1}};return l(),(e,a)=>{const n=b;return U(),k("div",null,[z(n,{columns:s(g),data:s(r),bordered:!1,remote:!0,loading:s(p),pagination:s(t),"onUpdate:pagination":a[0]||(a[0]=o=>R(t)?t.value=o:null),"max-height":"calc(100vh - 304px)"},null,8,["columns","data","loading","pagination"])])}}});export{Q as default};
